% !TEX root = ../../../main.tex
\section{Size estimation: Function Points}
The Function Points approach estimates the size of a software project starting from the functionalities that it has to offer. Several real projects have been analyzed to determine the number of FPs associated with a set of Function Types and the related estimated complexity. The values are provided by the table below:

\begin{table}[H]
	\centering
	\caption{UFP Complexity Weights}
	\label{tab:ufp}
	\begin{tabular}{|c|c|c|c|}
		\hline
		 & \multicolumn{3}{ c |}{Complexity Weight}	\\	\hline
		\textit{Function type} & \textit{Low} & \textit{Average} & \textit{High}\\ \hline
		Internal Logic Files	& 7 & 10 & 15\\
		External Logic Files	& 5 & 7 & 10 \\
		External Inputs			& 3 & 4 & 6 \\
		External Inquiries		& 3 & 4 & 6 \\
		External Outputs		& 4 & 5 & 7 \\
		\hline
	\end{tabular}
\end{table}


\subsection{Internal Logic Files}
ILFs are groups of homogeneous data or control information that are stored within the application. In the following paragraphs, a brief discussion about the PowerEnJoy ILFs will be provided.

First of all, the users data need to be stored in the system. A User entity in the database stores personal details (name, surname and tax code), the driver licence identification number, login data and payment information. All these items are stored as strings.

For what concerns the Car status entities, the items that need to be stored are the identification number, the status of the car (Available, Unavailable, Reserved and In Use) and the position as a structure that includes the latitude and longitude values.

The same structure used to store the position of the cars is used in the Safe Area entities. This information allows the system to compare the position of a car, when a rent has just ended, with the ones that represent the safe areas. Moreover, a boolean value indicates the possibility or not to plug the cars with the power grid in a specific safe area.

The last entities that need to be stored are the ones related to the bookings and rentals. The former stores the starting time of the booking and if that booking has expired or not. Moreover, it has a reference to the user that started the booking and the car that has been booked. The latter, instead, stores the rental duration and, at the end of the rental, the amount due by the driver is included.

The previous considerations and the UFP Complexity Weights provided in the Table \ref{tab:ufp} has led to the following ILFs Function Points estimation:

\begin{table}[H]
	\centering
	\caption{ILFs Function Points}
	\label{tab:ilfs}
	\begin{tabular}{|l|l|l|}
		\hline
		ILF					&	Complexity	&	FPs	\\ \hline
		User data			&	Low			&	7	\\
		Car status			&	Low			&	7	\\
		Safe areas	  		&	Low			&	7	\\ 
		Booking				&	Average		&	10	\\
		Rental				&	Average		&	10	\\ \hline
		\multicolumn{2}{| l |}{Total}		&	41	\\
		\hline
	\end{tabular}
\end{table}

\subsection{External Logic Files}
ELFs are groups of homogeneous data used by the application to be developed but retrieved and created by external applications.

PowerEnJoy needs to exchange messages with the following services:
\begin{itemize}
	\item{\textbf{Recovery service} \tab The Recovery Service is required in order to advise an external company when a car requires attention because a non expected event has happened.}
	\item{\textbf{Notification service} \tab The Notification Service is required in order to notify the user via the PowerEnJoy app or the onboard computer integrated in the cars of events not triggered directly by the user (e.g. the expiration of a booking).}
	\item{\textbf{Payment service} \tab The Payment Service is required in order to charge the user with the due amount related to the PowerEnJoy services.}
\end{itemize}

The communications between PowerEnJoy and external application are executed through RESTful APIs and since simple strings needs to be transmitted it is expected that the data structure will be in JSON format.

The previous considerations and the UFP Complexity Weights provided in the Table \ref{tab:ufp} has led to the following ELFs Function Points estimation:

\begin{table}[H]
	\centering
	\caption{ELFs Function Points}
	\label{tab:elfs}
	\begin{tabular}{|l|l|l|}
		\hline
		ELF					&	Complexity	&	FPs	\\ \hline
		Recovery request	 &	 Low		&	5	\\
		Notification message &	 Low		&	5	\\
		Payment request		 &	 Low		&   5  \\ \hline
		\multicolumn{2}{| l |}{Total}		&	15\\
		\hline
	\end{tabular}
\end{table}

\subsection{External Inputs}
EIs are all the operations offered by the application that elaborate data coming from the external environment. These operations can be triggered by the users from both the PowerEnJoy application and the onboard computer.

Based on the estimated complexity of the EIs and the UFP Complexity Weights provided in the Table \ref{tab:ufp}, the following table provides the Function Points estimation:

\begin{table}[H]
	\centering
	\caption{EIs Function Points}
	\label{tab:eis}
	\begin{tabular}{|l|l|l|}
		\hline
		EI					&	Complexity	&	FPs	\\ \hline
		User registration	&	Average		&	4	\\
		Login/Logout		&	Low			&	2*3	\\ 
		Book a car			&	Average		&	4	\\
		Delete booking		&	Low			&	3	\\
		Unlock car doors	&	Average		&	4	\\
		Begin rental		&	High		&	6	\\
		End rental			&	High		&	6	\\ \hline
		\multicolumn{2}{| l |}{Total}		&	33\\
		\hline
	\end{tabular}
\end{table}

If the reader wants to examine in depth the functionalities mentioned in the table above, more details can be found in the RASD \cite{rasd} and DD \cite{dd}.

\subsection{External Inquiries}
EQs are all the operations offered by the application that involves input and ouput data. This means that this kind of operations are are triggered by the users and a response with the data required is provided through the PowerEnJoy application or the onboard computers.

Based on the estimated complexity of the EQs and the UFP Complexity Weights provided in the Table \ref{tab:ufp}, the following table provides the Function Points estimation:

\begin{table}[H]
	\centering
	\caption{EQs Function Points}
	\label{tab:eqs}
	\begin{tabular}{|l|l|l|}
		\hline
		EQ					&	Complexity	&	FPs	\\ \hline
		Find cars						&	Low			&	3	\\
		Get details about car			&	Low			&	3
	\\ \hline
		\multicolumn{2}{| l |}{Total}					&	6\\
		\hline
	\end{tabular}
\end{table}

If the reader wants to examine in depth the functionalities mentioned in the table above, more details can be found in the RASD \cite{rasd} and DD \cite{dd}.

\subsection{External Outputs}
EOs are all the operations offered by the application that generates data for the external environments. These operations are triggered by the PowerEnJoy backend system and sended to the users via the PowerEnJoy application and or the onboard computers.

Based on the estimated complexity of the EOs and the UFP Complexity Weights provided in the Table \ref{tab:ufp}, the following table provides the Function Points estimation:

\begin{table}[H]
	\centering
	\caption{EOs Function Points}
	\label{tab:eos}
	\begin{tabular}{|l|l|l|}
		\hline
		EO					&	Complexity	&	FPs	\\ \hline
		Elapsed booking notification		&	Low		&	4	\\
		Unlock car doors notification		&	Low		&	4	\\
		Ended rental notification			&	Low		&	4	\\
		Get info about ongoing rental		&	High	&	7	\\ \hline
		\multicolumn{2}{| l |}{Total}					&	19\\
		\hline
	\end{tabular}
\end{table}

If the reader wants to examine in depth the functionalities mentioned in the table above, more details can be found in the RASD \cite{rasd} and DD \cite{dd}.

\subsection{Overall Estimation}
The following table provides the overall estimation of all the Function Types discussed above:

\begin{table}[H]
	\centering
	\caption{Function Points overall estimation}
	\label{tab:overall_fps}
	\begin{tabular}{|l|l|}
		\hline
		Function Type		&	Value	\\ \hline
		Internal Logic Files	&	41	\\
		External Logic Files	&	15	\\ 
		External Inputs			&	33	\\ 
		External Inquiries		&	6	\\ 
		External Outputs		&	19	\\ \hline
		Total					&	114	\\
		\hline
	\end{tabular}
\end{table}

Below, the expected SLOC, calculated using the formulas provided by the Function Points method, is provided. The value has been calculated considering Java as the development language for the business logic part of the PowerEnJoy system (see Section 2.4 of DD \cite{dd} for more details).

\begin{center}
$SLOC = AVC * number \ of \ function \ points$
\end{center}
Given the Java AVC values provided by QSM \cite{avc_qsm}, the estimated SLOC lower bound is:
\begin{center}
$SLOC = 14 * 114 = 1596$
\end{center}
While the upper bound is estimated to be:
\begin{center}
$SLOC = 134 * 114 = 15276$
\end{center}
In the following section the SLOC value that will be considered is the one calculated using the AVC average value:
\begin{center}
$SLOC = 53 * 114 = 6042$
\end{center}
